БАЗА ЗНАНИЙ ТЕХНИЧЕСКОЙ ПОДДЕРЖКИ 1С
Версия 1.1

Этот текст предназначен для внутренней эксплуатации и для поиска по знаниям. Он написан в стиле практического руководства для технической поддержки 1С и описывает типовые ситуации, диагностику и эксплуатационные подходы. Текст сознательно изложен ровным, однообразным способом без списков и нумераций, чтобы его было удобно индексировать и использовать как справочник в системах поиска.

В документе под платформой понимается «1С:Предприятие 8.3» со всеми компонентами, включая клиентские приложения, серверные службы, инструменты администрирования, веб‑публикацию и вспомогательные утилиты. Под конфигурацией понимается прикладное решение, которое исполняется на платформе. Под информационной базой понимается набор метаданных конфигурации и данных пользователей. В инфраструктурной части рассматриваются файловые и клиент‑серверные базы, кластера серверов 1С, терминальные среды, а также СУБД, как правило PostgreSQL или Microsoft SQL Server.

Главная идея работы поддержки состоит в том, что «проблема в 1С» почти всегда относится к конкретному слою: клиент, сеть, сервер 1С, СУБД, публикация веб‑клиента, лицензирование, внешние интеграции или прикладная логика конфигурации. Поэтому любые действия должны начинаться с определения симптома, масштаба, времени и изменений, после чего поддержка выбирает минимальный набор проверок, который позволяет локализовать неисправность и получить воспроизводимые факты.

Далее в тексте используется модель линий поддержки, в которой первая линия отвечает за первичный прием, корректную фиксацию симптомов и сбор данных, вторая линия отвечает за техническую диагностику платформы и инфраструктуры, а третья линия привлекается при сложных дефектах конфигурации и платформы, при необходимости исправлений кода, нестандартной настройке или взаимодействии с разработчиками и вендором.

РАЗДЕЛ. КАК ПРАВИЛЬНО ОФОРМИТЬ ОБРАЩЕНИЕ

Сильная техническая поддержка начинается с правильного тикета. В тикете всегда важны формулировка симптома, время, частота, масштаб, контур, способ доступа и текст ошибки целиком. Если пользователь сообщает о проблеме, поддержка уточняет, что именно не работает: вход в базу, запуск клиента, конкретная операция, отчет, обмен, печать, загрузка данных, закрытие периода или регламентные задания. Поддержка обязательно уточняет, воспроизводится ли проблема у других пользователей, и зависит ли проблема от места работы, от VPN, от терминального сервера, от конкретного компьютера, от веб‑клиента или от тонкого клиента.

В тикете обязательно фиксируются сведения о базе и окружении. Это включает имя информационной базы, контур (продуктивный или тестовый), версию конфигурации, а также версию платформы на клиенте и на сервере. Для клиент‑серверной базы фиксируется тип СУБД и версия, а также имя сервера СУБД и логическая схема развертывания, если она сложная. Для веб‑клиента фиксируется URL публикации и тип веб‑сервера, например IIS или Apache/Nginx, а также наличие TLS и используемый сертификат. Если известны изменения перед проблемой, например обновления, сетевые работы, смена сертификатов или перенос виртуальной машины, эти изменения фиксируются в тикете как ключевой контекст.

РАЗДЕЛ. БАЗОВАЯ ДИАГНОСТИКА «НЕ РАБОТАЕТ 1С»

Когда поступает сообщение «1С не работает», поддержка действует как диагност. Сначала определяется симптом и слой. Если проблема связана с запуском клиента и ошибка возникает сразу, то чаще всего проблема находится на клиенте, в профиле, в компоненте платформы, в криптопровайдере или в сетевом доступе к серверу. Если клиент запускается и пользователь входит, но конкретная операция падает, то проблема часто связана с прикладной логикой, правами, данными, обменом или блокировками. Если все действия начинают работать значительно медленнее, то чаще всего проблема находится в ресурсах сервера 1С, в СУБД, в дисковой подсистеме, в сети или в параллельных фоновых заданиях.

Далее поддержка определяет масштаб. Если проблема у одного пользователя, то основной акцент делается на клиентскую часть, профиль, кэш, права, антивирус, стабильность терминальной сессии и устройства. Если проблема у многих или у всех, то основной акцент смещается на доступность серверов, состояние служб, загрузку ресурсов, доступность СУБД, лицензирование и возможные массовые блокировки.

После этого выполняется быстрая проверка доступности сервиса. В зависимости от политики безопасности могут использоваться проверка сетевого маршрута, проверка DNS, проверка доступности TCP‑портов или проверка доступности веб‑URL. Важно понимать, что отсутствие доступа часто означает проблему на сетевом уровне, на уровне фаерволов, прокси, балансировщика или службы, а не дефект 1С как таковой.

Далее поддержка проверяет состояние служб. Для серверной части важно, что службы кластера 1С подняты, что рабочие процессы не находятся в цикле перезапуска, и что нет событий, указывающих на падения. Для СУБД важно, что служба работает, что журналы не переполнены, что диск не заполнен, и что нет массовых ошибок ввода‑вывода. Для веб‑публикации важно, что веб‑сервер работает, пул приложений не остановлен, публикация не ушла в ошибку, а сертификаты валидны.

После проверки служб выполняется быстрая оценка ресурсов. Поддержка смотрит на CPU, память и наличие свопинга, дисковую задержку и очередь на дисках, сетевую стабильность, а также на свободное место на диске, потому что переполнение диска часто вызывает цепочку вторичных проблем, особенно в СУБД и в логировании.

Затем проверяется наличие блокировок. На стороне 1С полезно посмотреть активные сеансы и наличие зависших операций, а на стороне СУБД важно проверить долгие транзакции и блокировки, потому что один пользователь или один регламентный процесс может блокировать критические таблицы и приводить к массовому «зависанию» операций у всех.

После первичных шагов поддержка решает, нужны ли логи. Важно применять логирование точечно. Если ошибка воспроизводится, можно включить технологический журнал на короткий период и с ограничением по событиям, чтобы не перегрузить систему. Если проблема массовая, полезнее начать с журналов ОС и СУБД, а также с журнала регистрации 1С.

РАЗДЕЛ. ПЛАТФОРМА 1С, ВЕРСИИ И ОБНОВЛЕНИЯ

Платформа 1С состоит из клиентских приложений и серверных компонентов. В эксплуатации важно поддерживать совместимость версий клиента и сервера. На практике лучше держать единый уровень платформы на всех клиентских местах и на сервере, чтобы минимизировать непредсказуемые эффекты. При обновлении платформы следует сначала обновлять тестовый контур, затем выполнять проверку основных бизнес‑операций, после чего планировать обновление на продуктиве с окном работ и планом отката.

Ошибки после обновления часто маскируются под «сломали 1С». На самом деле причиной нередко становится несовместимость версии, изменившиеся настройки TLS, конфликт с криптопровайдерами, изменение политик безопасности, проблемы с драйверами печати в терминальной среде или нехватка прав на каталоги кэша и профиля.

РАЗДЕЛ. ФАЙЛОВАЯ И КЛИЕНТ‑СЕРВЕРНАЯ БАЗА

Файловая база удобна простотой, но плохо масштабируется и чувствительна к сбоям. При росте числа пользователей и объема данных возрастает риск повреждения файла, растет время операций и увеличивается влияние блокировок на уровне файла. Клиент‑серверная база сложнее в обслуживании, но обеспечивает более надежное хранение данных, лучше масштабируется, предоставляет инструменты диагностики и резервного копирования на уровне СУБД и позволяет эффективнее работать с высокой нагрузкой.

Переход на клиент‑серверную архитектуру обычно оправдан при росте одновременных пользователей, при наличии регулярных зависаний, при требованиях к восстановлению и при большом количестве интеграций и фоновых процессов.

РАЗДЕЛ. СЕРВЕР 1С И КЛАСТЕР

В клиент‑серверной архитектуре сервер 1С выполняет прикладной код, обслуживает сеансы, распределяет нагрузку и взаимодействует с СУБД. В кластере 1С присутствуют процессы, которые управляют рабочими процессами и распределением нагрузки. В эксплуатации важно контролировать, чтобы рабочие процессы не выходили за пределы памяти, чтобы число процессов соответствовало ресурсам CPU и памяти, и чтобы при сбое одного процесса система не деградировала массово.

Типовые признаки проблем кластера включают частые перезапуски рабочих процессов, массовые разрывы сеансов, рост времени отклика при стабильной СУБД, а также ситуации, когда на одном узле кластера резко растет нагрузка и распределение становится неравномерным. В таких случаях поддержка проверяет состояние служб, журналы событий ОС, параметры кластера, динамику ресурсов и коррелирует это с графиками нагрузки СУБД.

РАЗДЕЛ. СУБД POSTGRESQL И MS SQL

СУБД является фундаментом производительности и надежности клиент‑серверной базы. Проблемы на стороне СУБД чаще всего проявляются как «все тормозит» или «ничего не проводится». Критичны блокировки, долгие транзакции, нехватка диска, высокие задержки ввода‑вывода, переполнение журналов, проблемы со статистиками и индексацией, а также неверные параметры памяти.

При диагностике медленной работы полезно сопоставлять время инцидента с текущими активными запросами, ожиданиями и блокировками. Для PostgreSQL важны корректная работа вакуума и актуальные статистики. Для MS SQL важны состояние tempdb, планы обслуживания и контроль за фрагментацией индексов и статистиками. В обоих случаях мониторинг должен охватывать не только CPU, но и дисковую подсистему, потому что именно дисковая задержка часто становится реальной причиной деградации.

РАЗДЕЛ. ПРОИЗВОДИТЕЛЬНОСТЬ И ЛОКАЛИЗАЦИЯ УЗКИХ МЕСТ

Понятие «медленно» всегда нужно переводить в измеримые параметры. Поддержка уточняет, сколько времени занимает операция, с какого момента это стало заметно, на каких пользователей влияет и чем отличается от нормального состояния. Далее поддержка пытается определить, что является ограничителем. Если ограничитель на стороне клиента, то полезно сравнить локальный запуск и терминальный, проверить профиль, кэш, влияние антивируса и общую стабильность рабочего места. Если ограничитель на стороне сети, то полезно проверить задержки и потери, особенно если пользователи работают через VPN или удаленные каналы.

Если ограничитель на стороне сервера 1С, то проверяются загрузка CPU, память, свопинг и состояние рабочих процессов. Если ограничитель на стороне СУБД, то проверяются блокировки, долгие запросы, ожидания и состояние дисков. Если ограничитель в прикладной логике, то обычно выявляется конкретная операция или отчет, которые запускают тяжелые запросы или создают массовые блокировки.

На практике эффективен подход, при котором поддержка ограничивает время диагностики на первом цикле и стремится сформировать проверяемую гипотезу. Для этого достаточно зафиксировать точное время, воспроизвести проблему и собрать ограниченный набор логов и метрик в коротком окне.

РАЗДЕЛ. ЖУРНАЛ РЕГИСТРАЦИИ И ТЕХНОЛОГИЧЕСКИЙ ЖУРНАЛ

Журнал регистрации используется для фиксации событий на уровне прикладной работы, включая входы, ошибки, действия и изменения. Он полезен для аудита и для понимания того, кто и когда выполнял операции. Технологический журнал используется для диагностики платформенных событий и производительности. Включать технологический журнал следует осторожно и точечно, потому что подробное логирование способно увеличить нагрузку и быстро заполнить диск.

При чтении технологического журнала важно всегда работать с конкретным интервалом времени, сопоставлять события с пользовательскими действиями и коррелировать их с метриками СУБД и ОС. Полезно искать длительные операции, повторяющиеся ошибки и ситуации, в которых один и тот же тип события возникает очень часто.

РАЗДЕЛ. ЛИЦЕНЗИРОВАНИЕ 1С

Лицензирование в 1С имеет несколько уровней и форм. В эксплуатации важно понимать, где установлен менеджер лицензий, какие лицензии используются, как они распределяются по сеансам, и какие изменения инфраструктуры могут повлиять на привязку программных лицензий. Типовые проблемы проявляются как невозможность входа, сообщения о нехватке лицензий, непредсказуемые разрывы сеансов и ситуации, когда после перезапуска сервера лицензии «не видятся».

При диагностике проблем лицензирования поддержка проверяет доступность менеджера лицензий, сетевые правила, корректность привязки программной лицензии в виртуализированной среде, а также актуальность и срок действия лицензий. Важно вести учет лицензий и мест их установки, чтобы при инциденте не тратить время на поиск.

РАЗДЕЛ. ОБНОВЛЕНИЯ КОНФИГУРАЦИЙ И ПЛАТФОРМЫ В ЭКСПЛУАТАЦИИ

Любое обновление должно рассматриваться как управляемое изменение. В нормальном процессе обновления заранее планируется окно работ, выполняется резервное копирование, на тестовом контуре проверяются ключевые бизнес‑сценарии, и только после этого выполняется обновление на продуктиве. После завершения обновления поддержка отслеживает систему, собирает обратную связь, фиксирует новую версию и сохраняет информацию о проделанных действиях.

Процедура отката должна быть заранее определена, потому что откат в момент кризиса без плана обычно приводит к дополнительным рискам. Откат может требовать не только восстановления базы данных, но и восстановления публикаций, сертификатов, интеграционных настроек и прав.

РАЗДЕЛ. РЕЗЕРВНОЕ КОПИРОВАНИЕ И ВОССТАНОВЛЕНИЕ

Надежное резервное копирование подразумевает не только факт наличия бэкапа, но и регулярную проверку восстановления. В клиент‑серверной архитектуре резервное копирование должно включать сценарии восстановления на тестовый контур, где проверяется вход в базу, корректность работы ключевых функций и интеграций. Также важно учитывать цели по RPO и RTO, чтобы частота бэкапов и скорость восстановления соответствовали потребностям бизнеса.

Распространенная ошибка состоит в том, что после восстановления базы забывают восстановить окружение, включая публикации веб‑клиента, привязки сертификатов, права на файловые ресурсы, учетные записи служб и параметры интеграций. Поэтому восстановление следует воспринимать как восстановление сервиса целиком, а не только базы данных.

РАЗДЕЛ. ОБМЕНЫ И ИНТЕГРАЦИИ

Интеграции в 1С могут работать через HTTP и HTTPS, через web‑services, через COM‑соединения, через файловый обмен, через очереди сообщений, через EDI‑провайдеров или через внешние компоненты. При любом сбое обмена поддержка определяет транспорт, конечную точку, учетные данные и временной интервал, после чего проверяет доступность и корректность безопасности, включая сертификаты и время на серверах. Многие проблемы обменов связаны не с 1С, а с недоступностью внешней системы, истечением сертификата, сменой токенов или изменениями в сетевых правилах.

При анализе обменов важна корреляция логов на стороне 1С и на стороне внешнего сервиса. Если обмен зависит от транзакций, то блокировки и долгие транзакции в СУБД могут приводить к очередям и накоплению ошибок.

РАЗДЕЛ. ТЕРМИНАЛЬНЫЕ СРЕДЫ RDS И CITRIX

В терминальных средах проблемы могут проявляться иначе, чем при локальном запуске. Часто встречаются ситуации, когда медленно работает только в терминале, когда пропадает печать, когда зависают сеансы или не работают устройства. В таких случаях поддержка сравнивает поведение в разных способах доступа, проверяет нагрузку на хост терминальной фермы, смотрит на профили пользователей и политики перенаправления устройств, а также учитывает влияние антивируса и групповых политик.

Терминальные среды требуют отдельного регламента чистки профилей и кэша, контроля принтеров и драйверов, и контроля ресурсов на хостах, потому что терминальная ферма легко упирается в диск и память при высокой плотности пользователей.

РАЗДЕЛ. БЕЗОПАСНОСТЬ И ДОСТУПЫ

В части безопасности поддержка придерживается принципа минимальных привилегий и разделения обязанностей. Проблемы доступа часто выглядят как «нет прав» после изменения ролей или групп. В веб‑доступе значимыми факторами являются сертификаты и параметры TLS. В криптографических сценариях значимы срок действия сертификата, корректная цепочка доверия, корректность контейнеров и настройка криптопровайдера.

Поддержка не должна распространять секреты в открытых каналах. Пароли и токены должны передаваться через защищенные хранилища или оговоренные безопасные процессы.

РАЗДЕЛ. ПАДЕНИЯ, ЗАВИСАНИЯ И РАЗРЫВЫ СЕАНСОВ

Разрыв сеанса может быть вызван обрывом сети, перезапуском рабочего процесса 1С, рестартом служб, таймаутами на прокси, ошибками в терминальной среде или дефектами клиента. В диагностике таких проблем важно установить, массовое ли это явление, и происходит ли оно в конкретный момент времени или привязано к конкретной операции. Поддержка сопоставляет время разрыва с событиями ОС, с перезапусками служб и с сетевыми логами, а при необходимости включает точечное логирование для воспроизведения.

Зависания чаще всего сводятся к блокировкам или тяжелым запросам. Если зависает конкретная операция, то вероятна блокировка или тяжелая выборка. Если зависает все, то вероятен общий инфраструктурный ограничитель, чаще всего диски или СУБД.

РАЗДЕЛ. ОШИБКИ ЗАПУСКА И УСТАНОВКИ

Ошибки запуска и установки платформы часто связаны с правами, политиками безопасности, несовместимостью компонентов, отсутствием нужных библиотек, конфликтами с антивирусом или некорректными настройками доступа к ресурсам. При сообщениях о невозможности установить соединение проверяются адреса, порты, DNS, фаерволы, доступность служб 1С и доступность СУБД. При ошибках прав проверяются роли и права в 1С, права на каталоги, а также влияние UAC и политик.

РАЗДЕЛ. РЕГЛАМЕНТНЫЕ ЗАДАНИЯ И ФОНОВЫЕ ПРОЦЕССЫ

Регламентные задания часто создают пики нагрузки. Они могут выполняться параллельно с пользовательской активностью и создавать блокировки или рост нагрузки на СУБД. Поэтому в эксплуатации важно согласовывать расписания фоновых заданий, избегать одновременного запуска тяжелых задач и контролировать повторные попытки, чтобы не создавать бесконечные циклы ошибок.

При сбое регламентного задания поддержка оценивает влияние, при необходимости временно останавливает процесс, устраняет причину, а затем запускает обработку в контролируемое окно, фиксируя итог и предотвращающие меры.

РАЗДЕЛ. КОММУНИКАЦИЯ И РАБОТА С ПОЛЬЗОВАТЕЛЯМИ

Поддержка должна уметь переводить технические действия в понятные бизнес‑сообщения. Пользователям важны влияние и прогноз восстановления. Поэтому в коммуникациях полезно фиксировать статус, описывать ожидаемое время следующего обновления и указывать, что нужно от пользователя, если требуются дополнительные данные.

При сборе информации от пользователя поддержка задает уточняющие вопросы про действия перед ошибкой, время, воспроизводимость, способ входа и наличие обходного пути. Это помогает ускорить диагностику и избежать лишних действий.

РАЗДЕЛ. ПРАКТИЧЕСКИЕ СЦЕНАРИИ ЭКСПЛУАТАЦИИ

Сценарий, когда пользователь не входит в базу, обычно начинается с уточнения способа входа и проверки масштаба. Затем проверяется доступность сервера или URL, проверяется состояние служб, лицензирование и доступность СУБД. Если проблема локальная, проверяется кэш, профиль, антивирус и права. Если проблема массовая, проверяются изменения, сетевые события, загрузка ресурсов и блокировки.

Сценарий, когда не открывается веб‑клиент и браузер сообщает о проблемах TLS, обычно сводится к проверке срока сертификата, цепочки доверия, параметров TLS и корректности привязки сертификата на веб‑сервере. Часто проблема появляется после замены сертификата, после изменения прокси или после изменения политик безопасности.

Сценарий, когда закрытие месяца или другая тяжелая процедура не завершается, часто связан с блокировками и конкуренцией за ресурсы. В таких случаях полезно сопоставить время с блокировками СУБД и с фоновыми заданиями. Если проблема воспроизводится на конкретном шаге, поддержка собирает диагностические данные и передает их на уровень разработчиков, если требуется оптимизация прикладного кода.

Сценарий, когда обмены не проходят и очередь растет, обычно начинается с проверки доступности внешней системы и учетных данных, после чего проверяются логи на стороне 1С и внешнего сервиса. Далее проверяется, нет ли блокировок, которые мешают обработке обмена, и нет ли повторных попыток, которые создают нагрузку.

Эксплуатационная практика мониторинга заключается в постоянном наблюдении за доступностью служб, дисковым пространством, ростом базы данных и журналов, блокировками и долгими транзакциями, длительностью фоновых заданий, ошибками интеграций и потреблением лицензий. Регулярное наблюдение снижает вероятность внезапных аварий и сокращает время диагностики.

В завершение важно отметить, что качество поддержки определяется не количеством технических действий, а скоростью получения достоверных фактов, корректной локализацией слоя проблемы и аккуратным выполнением изменений с планом восстановления. Этот документ предназначен для того, чтобы поддержка действовала предсказуемо, одинаково и безопасно, независимо от того, кто именно принимает обращение.
